
<html>
<head>
    <title>Hello X3DOM</title>
    <script type='text/javascript' src='../X3DOM/x3dom.js'> </script>
    <link rel='stylesheet' type='text/css' href='../X3DOM/x3dom.css'></link>

    <script>

        function main() {

            let scene = document.getElementById("scene");

            let shape = document.createElement("shape");

            let appearance = document.createElement("appearance");
            let material = document.createElement("material");
            material.setAttribute("diffuseColor", "1 0 0");
            appearance.append(material);

            let box = document.createElement("box");

            shape.append(appearance);
            shape.append(box);

            scene.append(shape);

            document.addEventListener('keyup', keyup);
        }

        let z=10;
        let x=0;

        let heading = 0;  // point in -ve z direction



        let headingDelta = Math.PI / 60;

        function keyup(event) {
            let key = event.key;

            if(key == "ArrowUp") {
                z-=Math.cos(heading);
                x-=Math.sin(heading)
            }
            else if(key == "ArrowDown") {
                z+=Math.cos(heading);
                x+=Math.sin(heading);
            }
            else if(key == "ArrowLeft") {
                heading += headingDelta;
            }
            else if(key == "ArrowRight") {
                heading -= headingDelta;
            }

            let viewpoint = document.getElementById("viewpoint");
            viewpoint.setAttribute("position", x+" 0 "+z);
            viewpoint.setAttribute("orientation", "0 1 0 "+heading);
        }

    </script>

</head>

<body onload="main()">
<x3d width='500px' height='400px' >
    <scene id="scene">
        <Viewpoint id="viewpoint" position="0 0 10" orientation="0 0 0 0"
                   zNear="0" zFar="1000" centerOfRotation="0 0 0" fieldOfView="0.78540" description="defaultX3DViewpointNode"></Viewpoint>
    </scene>
</x3d>


</body>
</html>


