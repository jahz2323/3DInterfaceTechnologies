
<html>
<head>
    <title>Hello X3DOM</title>
    <script type='text/javascript' src='../X3DOM/x3dom.js'> </script>
    <link rel='stylesheet' type='text/css' href='../X3DOM/x3dom.css'></link>

    <script>

        function main() {

            console.log("In main...");
            addGround();

            for(let x=-20; x<20; x+=5)
                for(let z=-20; z<20; z+=5)
                    addBuilding(x, z);
        }

        function addGround() {
            let scene = document.getElementById("scene");

            let shape = document.createElement("shape");

            let appearance = document.createElement("appearance");
            let material = document.createElement("material");
            material.setAttribute("emissiveColor", "0.5 0.5 0.5");

            appearance.append(material);

            let box = document.createElement("box");
            box.setAttribute("size", "50 0.1 50");

            console.log(box);


            shape.append(appearance);
            shape.append(box);

            scene.append(shape);


        }

        function addBuilding(x, z) {
            let scene = document.getElementById("scene");

            let transform = document.createElement("transform");
            transform.setAttribute("translation", x+" 1 "+z);
            scene.append(transform);

            let shape = document.createElement("shape");

            let appearance = document.createElement("appearance");

            let imageTexture = document.createElement("ImageTexture");
            imageTexture.setAttribute("url", "../res/textures/building1.jpg");
            appearance.append(imageTexture);

            let box = document.createElement("box");
            box.setAttribute("size", "2 2 2");


            shape.append(appearance);
            shape.append(box);

            transform.append(shape);
        }

    </script>

</head>

<body onload="main()">
<x3d width='500px' height='400px'>
    <scene id="scene">
    </scene>
</x3d>


</body>
</html>


